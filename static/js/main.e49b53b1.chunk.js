(this.webpackJsonpmemeaker=this.webpackJsonpmemeaker||[]).push([[0],{185:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=185},186:function(e,t){},310:function(e,t,n){},325:function(e,t){},326:function(e,t){},327:function(e,t){},328:function(e,t){},329:function(e,t){},330:function(e,t){},331:function(e,t,n){},332:function(e,t,n){},334:function(e,t,n){},335:function(e,t,n){},336:function(e,t,n){},337:function(e,t,n){},338:function(e,t,n){},339:function(e,t,n){},340:function(e,t,n){},341:function(e,t,n){},342:function(e,t,n){},347:function(e,t){},348:function(e,t){},356:function(e,t){},357:function(e,t,n){},358:function(e,t,n){},359:function(e,t,n){},362:function(e,t,n){"use strict";n.r(t);var a,c,r=n(15),i=n.n(r),o=n(136),s=n.n(o),u=(n(310),n(8)),l=n.n(u),d=n(11),h=n(5),b=n(25),j="DELETE_CANVAS_OBJECT",f="CREATE_CANVAS_OBJECT",p="UPDATE_CANVAS_OBJECT",v="SET_ACTIVE_OBJECT",O=n(34),g=n(364),m=n(56),x=n(135),w=n(250),_=n(17),y=n(67),k={objects:{},objectsList:[],activeObject:null},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return console.log("create canvas object"),console.log(e.objectsList),Object(O.a)(Object(O.a)({},e),{},{objects:Object(O.a)(Object(O.a)({},e.objects),{},Object(y.a)({},t.canvasObject.id,t.canvasObject)),objectsList:[].concat(Object(_.a)(e.objectsList),[t.canvasObject.id]),activeObject:t.canvasObject.id});case v:return Object(O.a)(Object(O.a)({},e),{},{activeObject:t.id});case p:return Object(O.a)(Object(O.a)({},e),{},{objects:Object(O.a)(Object(O.a)({},e.objects),{},Object(y.a)({},t.id,Object(O.a)(Object(O.a)({},e.objects[t.id]),t.canvasObject)))});case j:return Object(O.a)(Object(O.a)({},e),{},{objects:Object(O.a)(Object(O.a)({},e.objects),{},Object(y.a)({},t.payload,Object(O.a)(Object(O.a)({},e.objects[t.payload]),{},{deleted:!0}))),activeObject:e.activeObject==t.payload?null:e.activeObject,objectsList:e.objectsList.filter((function(e){return e!==t.payload}))});default:return e}},C="SET_CANVAS_DIMENSIONS",E="SET_CANVAS_MAX_DIMENSIONS",S="SET_BACKGROUND_IMAGE",D="SET_SHOW_IMAGE_OVERLAY",I="TRIGGER_RERENDER",M="CLEAR_CANVAS",T={dimensions:{width:600,height:400},maxDimensions:{width:600,height:400},backgroundImage:null,showChoseBackgroundOverlay:!0,renderToggle:!1},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(O.a)(Object(O.a)({},e),{},{renderToggel:!e.renderToggle});case C:return Object(O.a)(Object(O.a)({},e),{},{dimensions:t.payload});case S:return Object(O.a)(Object(O.a)({},e),{},{dimensions:{width:t.payload.width,height:t.payload.height},backgroundImage:t.payload.image,showChoseBackgroundOverlay:!1});case E:return Object(O.a)(Object(O.a)({},e),{},{maxDimensions:t.payload});case M:return Object(O.a)(Object(O.a)({},e),{},{backgroundImage:null});case D:return console.log("change show"),Object(O.a)(Object(O.a)({},e),{},{showChoseBackgroundOverlay:t.payload});default:return e}},z=Object(x.b)({canvasObjects:N,canvas:L}),A=Object(x.c)(z,Object(x.a)(w.a)),B=n(7),R=n(39),P=n(38),F=(n(324),function(e){Object(R.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(B.a)(this,n),(a=t.call(this)).setObjectData=function(e){a.object=e,a.cachedObject=JSON.stringify(a.object)},a.shouldUpdate=function(e){return JSON.stringify(e)!==a.cachedObject},a.getData=function(){return a.object},a.update=function(e){a.shouldUpdate(e)&&(a.setObjectData(e),a.updateBaseProperties(e),a.updateObject(e))},a.updateBaseProperties=function(e){a.x=e.x,a.y=e.y,a.rotation=e.rotation||0},a.updateObject=function(e){},a.getWidth=function(){return a.width},a.getHeight=function(){return a.height},a.object=e,a.cachedObject=JSON.stringify(a.object),a.x=e.x?e.x:0,a.y=e.y?e.y:0,a}return n}(m.b)),W=function(e){Object(R.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(B.a)(this,n),(a=t.call(this,e)).updateObject=function(e){a.text.style.wordWrap=!0,a.text.style.wordWrapWidth=e.width,a.background.width=e.width,a.background.height=e.height,a.text.style.fill=e.color?m.f.string2hex(e.color):0,a.text.style.stroke=e.borderColor?m.f.string2hex(e.borderColor):0,a.text.style.strokeThickness=(null===e||void 0===e?void 0:e.borderWidth)||0,a.text.style.fontSize=(null===e||void 0===e?void 0:e.fontSize)||32,a.pivot.set(e.width/2,e.height/2)},a.textContent=e.text,a.text=new m.e(a.textContent),a.background=new m.c,a.background.beginFill(16711680),a.background.drawRect(0,0,a.text.width,a.text.height),a.background.endFill(),a.mask=a.background,a.updateObject(e),a.addChild(a.background,a.text),a}return n}(F),H=function(e){Object(R.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(B.a)(this,n),(a=t.call(this,e)).hasLoaded=function(){return new Promise((function(e,t){var n=0,c=setInterval((function(){console.log(a.sprite.width),1!==a.sprite.width&&(clearInterval(c),e()),n>=30&&(clearInterval(c),t()),n++}),20)}))},a.updateObject=function(e){a.sprite.width=e.width,a.sprite.height=e.height,e.flipHorizontal?(a.sprite.scale.x=-1*Math.abs(a.sprite.scale.x),a.sprite.anchor.x=1):(a.sprite.scale.x=Math.abs(a.sprite.scale.x),a.sprite.anchor.x=0),a.pivot.set(e.width/2,e.height/2)},a.getWidth=function(){return a.sprite.width},a.getHeight=function(){return a.sprite.height},a.sprite=m.d.from(e.src),a.addChild(a.sprite),a}return n}(F),U=function(e){Object(R.a)(n,e);var t=Object(P.a)(n);function n(e){var a;return Object(B.a)(this,n),(a=t.call(this,e)).update=function(e){if(a.background.width=e.dimensions.width,a.background.height=e.dimensions.height,e.backgroundImage!==a._sprite){if(null===e.backgroundImage)a.removeChild(a.sprite);else{a.removeChild(a.sprite),a.sprite=null;var t=""+e.backgroundImage;a.sprite=m.d.from(t),a.sprite.width=a.background.width,a.sprite.height=a.background.height,a.addChild(a.sprite)}a._sprite=e.backgroundImage}},a._sprite=null,a.sprite=null,a.background=new m.c,a.background.beginFill(16777215),a.background.drawRect(0,0,600,400),a.background.endFill(),a.addChild(a.background),a}return n}(m.b),V={},J="IMAGE_OBJECT",G="TEXT_OBJECT",X=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.id||Q(t.id)){e.next=14;break}return e.next=3,Y(t);case 3:return(n=e.sent).interactive=!0,n.buttonMode=!0,n.zIndex=5,n.pivot.set(n.width/2,n.height/2),c=function(e){console.log("on item click!!!"),console.log(t.id),A.dispatch(ne(t.id))},n.on("mousedown",c).on("touchstart",c),a.stage.addChild(n),V[t.id]=n,console.log(V),e.abrupt("return",n);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===J?3:e.t0===G?4:7;break;case 3:return e.abrupt("return",q(t));case 4:return e.next=6,K(t);case 6:return e.abrupt("return",e.sent);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new H(t),e.next=3,n.hasLoaded();case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new W(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(e){return e in V};A.subscribe((function(){if(a){var e=A.getState(),t=e.canvasObjects,n=e.canvas,r=n.dimensions;i=r.width,o=r.height,a.view.width=i,a.view.height=o,console.log("resize canvas"),a.renderer.resize(i,o),Object.keys(t.objects).map((function(e){t.objects[e].deleted&&function(e){var t=V[e];a.stage.removeChild(t),V[e]=null}(e)})),c.update(n),function(e){var t=e.objects,n=e.objectsList;e.activeObject,n.forEach((function(e){if(console.log(e),Q(e)){var n=t[e];V[e].update(n)}}))}(t)}var i,o}));var Z=function(e){return{type:f,canvasObject:e}},$=function(e){return function(){var t=Object(d.a)(l.a.mark((function t(n){var a,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e,a=Object(O.a)(Object(O.a)({fontSize:32,color:"#ffffff",boderColor:"#000000",borderWidth:3,wordWrap:!0,x:0,y:0,flipVertical:!1,flipHorizontal:!1,rotation:0},r),{},{id:Object(g.a)(),type:G}),t.next=3,X(a);case 3:c=t.sent,console.log("create text"),console.log(c),a.width=(null===c||void 0===c?void 0:c.getWidth())||100,a.height=(null===c||void 0===c?void 0:c.getHeight())||100,console.log("canvasText width"),console.log(null===c||void 0===c?void 0:c.getWidth()),n(Z(a));case 11:case"end":return t.stop()}var r}),t)})));return function(e){return t.apply(this,arguments)}}()},ee=function(e,t){var n=e.width,a=e.height;return n>t.width&&(a=t.width/n*a,n=t.width),a>t.height&&(n=t.height/a*n,a=t.height),{width:n,height:a}},te=function(e){return function(){var t=Object(d.a)(l.a.mark((function t(n){var a,c,r,i,o,s,u,d,h;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=e,a=Object(O.a)(Object(O.a)({width:100,height:100,flipVertical:!1,flipHorizontal:!1,image:"",x:0,y:0,rotation:0},l),{},{id:Object(g.a)(),type:J}),t.next=3,X(a);case 3:c=t.sent,r=(null===c||void 0===c?void 0:c.getWidth())||100,i=(null===c||void 0===c?void 0:c.getHeight())||100,o=A.getState(),s=o.canvas.dimensions,u=ee({width:r,height:i},{width:s.width/2,height:s.height/2}),d=u.width,h=u.height,console.log(d,h),a.width=d,a.height=h,n(Z(a));case 13:case"end":return t.stop()}var l}),t)})));return function(e){return t.apply(this,arguments)}}()},ne=function(e){return{type:v,id:e}},ae=function(e,t){return{type:p,id:e,canvasObject:t}},ce=function(e,t){return{type:C,payload:{width:e,height:t}}},re=function(e,t,n){return{type:S,payload:{image:e,width:t,height:n}}},ie=function(e){return{type:D,payload:e}},oe=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new Image;a.onload=function(){return e(a)},a.onerror=n,a.src=URL.createObjectURL(t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),se=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=new Image;a.onload=function(){return e(a)},a.onerror=n,a.src=t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t.toBlob((function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),le=n(97),de=(n(331),n(303)),he=(n(332),n(9)),be=function(e){var t=e.label,n=e.suffix,a=e.disabled,c=Object(de.a)(e,["label","suffix","disabled"]);return Object(he.jsxs)("div",{className:"input",children:[Object(he.jsx)("label",{className:"input__label",children:t}),Object(he.jsx)("input",Object(O.a)({className:"input__input",disabled:a},c)),Object(he.jsx)("div",{className:"input__type",children:n})]})},je=(n(334),function(){var e=Object(b.c)((function(e){return e.canvas.maxDimensions})),t=e.width,n=e.height;return{limit:function(e,a){return console.log(t,n),e>t&&(a*=t/e,e=t),a>n&&(console.log("fix height"),e*=n/a,a=n),{width:Math.round(e),height:Math.round(a)}},maxWidth:t,maxHeight:n}}),fe=function(){var e=Object(b.b)(),t=je(),n=t.limit,a=(t.maxWidth,t.maxHeight,Object(b.c)((function(e){return e.canvas.dimensions}))),c=a.width,r=a.height,i=Object(b.c)((function(e){return e.canvas.backgroundImage})),o=function(){var t=Object(d.a)(l.a.mark((function t(a){var c,r,i,o,s;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("load image"),!(c=a.target)||!c.files){t.next=8;break}return t.next=5,oe(c.files[0]);case 5:r=t.sent,i=n(r.width,r.height),o=i.width,s=i.height,e(re(r.src,o,s));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(he.jsxs)("div",{className:"canvas-settings",children:[Object(he.jsx)("div",{className:"canvas-settings__img-container ".concat(i?"":"canvas-settings__img-container--clear"),children:Object(he.jsx)("img",{src:i})}),Object(he.jsxs)("div",{className:"canvas-settings__controlls",children:[Object(he.jsxs)("div",{className:"canvas-settings__dimensions",children:[Object(he.jsx)(be,{suffix:"px",label:"width",value:c,onChange:function(t){var n=t.target,a=parseInt(n.value);e(ce(a,r))},disabled:!!i}),Object(he.jsx)(be,{suffix:"px",label:"height",value:r,onChange:function(t){var n=t.target,a=parseInt(n.value);e(ce(c,a))},disabled:!!i})]}),Object(he.jsxs)("div",{className:"canvas-settings__buttons",children:[Object(he.jsxs)("label",{className:"canvas-settings__image-input",children:["Custom Image",Object(he.jsx)("input",{type:"file",accept:"image/*",name:"image",onChange:o})]}),Object(he.jsx)("button",{className:"canvas-settings__button",onClick:function(){e({type:M})},children:"Clear Backgorund"})]})]})]})},pe=[{name:"",path:"TwoButtons.png"},{name:"",path:"ChangeMyMind.png"},{name:"",path:"DistractedBoyfriend.png"},{name:"",path:"BatmanSlappingRobin.png"},{name:"",path:"BernieSupport.png"},{name:"",path:"BikeFall.png"},{name:"",path:"BuffDogeVS.png"},{name:"",path:"Draw25.png"},{name:"",path:"EpicHandshaker.png"},{name:"",path:"ExpandingBrain.png"},{name:"",path:"GrusPlan.png"},{name:"",path:"IsThisAPigeon.png"},{name:"",path:"LeftExitOffRamp.png"},{name:"",path:"MockingSpongebob.png"},{name:"",path:"OneDoesNotSimply.png"},{name:"",path:"RunningAwayBalloon.png"},{name:"",path:"SadPabloEscobar.png"},{name:"",path:"TheyAreTheSamePicture.png"},{name:"",path:"TradeOffer.png"},{name:"",path:"ThinkAboutIt.png"},{name:"",path:"ThisIsFine.png"},{name:"",path:"SuprisedPikachu.png"},{name:"",path:"LaughingLeo.png"},{name:"",path:"ThisIsWhereIdPutMyTrophyIfIHadOne.png"},{name:"",path:"FuturamaFry.png"},{name:"",path:"YallGotAnyMoreOfThat.png"},{name:"",path:"Drake.png"},{name:"",path:"SquidwardWindow.png"},{name:"",path:"TwoSpiderman.png"},{name:"",path:"SpongebobBurningPaper.png"}],ve=(n(335),function(e){var t=e.template,n=e.onClick,a=function(e){return"/meme_templates/"+e.path}(t);return Object(he.jsx)("div",{className:"template-list__item",style:{backgroundImage:"url('".concat(a,"')")},title:t.name||t.path,onClick:function(){return n(a)}})}),Oe=function(){var e=Object(b.b)(),t=Object(r.useRef)(null),n=je(),a=n.limit,c=(n.maxWidth,n.maxHeight,Object(r.useState)("")),i=Object(h.a)(c,2),o=i[0],s=i[1],u=Object(r.useState)(0),j=Object(h.a)(u,2),f=j[0],p=j[1],v=Object(r.useState)(14),O=Object(h.a)(v,2),g=O[0],m=(O[1],Object(r.useState)(1)),x=Object(h.a)(m,2),w=x[0],y=x[1],k=Object(r.useState)([]),N=Object(h.a)(k,2),C=N[0],E=N[1];Object(r.useEffect)((function(){!function(){var e=D(o);y(Math.ceil(e.length/g));var t=S(e,f,g);console.log(t),E(t)}()}),[o,f,g]);var S=function(e,t,n){var a=t*n,c=(t+1)*n;return e.slice(a,c>e.length?e.length:c)},D=function(e){return""===e?pe:pe.filter((function(t){var n=e.toLowerCase();return t.name.toLowerCase().includes(n)||t.path.toLowerCase().includes(n)}))},I=function(){var t=Object(d.a)(l.a.mark((function t(n){var c,r,i,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,se(n);case 2:c=t.sent,r=a(c.width,c.height),i=r.width,o=r.height,e(re(n,i,o));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(he.jsxs)("div",{className:"template-list",children:[Object(he.jsx)("div",{className:"template-list__search-container",children:Object(he.jsx)("input",{className:"template-list__search",placeholder:"search...",value:o,onChange:function(e){var t=e.target.value;s(t)}})}),Object(he.jsx)("div",{className:"template-list__items",ref:t,children:C.length>0?C.map((function(e){return Object(he.jsx)(ve,{template:e,onClick:I},e.path)})):Object(he.jsx)("div",{className:"template-list__message",children:"No templates found"})}),Object(he.jsx)("div",{className:"template-list__pagination",children:Object(_.a)(new Array(w)).map((function(e,t){return Object(he.jsx)("div",{className:"template-list__page-icon ".concat(t==f?"template-list__page-icon--active":""),onClick:function(){return p(t)},children:Object(he.jsx)("span",{children:t+1})},"page-".concat(t))}))})]})},ge=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.canvas.showChoseBackgroundOverlay}));console.log(t);return Object(he.jsx)("div",{className:"canvas-editor ".concat(t?"":"canvas-editor--closed"),children:Object(he.jsxs)("div",{className:"canvas-editor__container",children:[Object(he.jsxs)("header",{className:"canvas-editor__header",children:[Object(he.jsx)("h3",{children:"Canvas Settings"}),Object(he.jsx)("button",{className:"canvas-editor__close",onClick:function(){e(ie(!1))},children:Object(he.jsx)(le.c,{})})]}),Object(he.jsxs)("div",{className:"canvas-editor__body",children:[Object(he.jsx)(fe,{}),Object(he.jsx)(Oe,{})]})]})})},me=(n(336),n(337),14),xe=function(e){var t=e.activeObject,n=e.container,a=Object(b.b)(),c=Object(r.useState)(!1),i=Object(h.a)(c,2),o=i[0],s=i[1];Object(r.useEffect)((function(){return document.addEventListener("mousemove",u,!1),function(){return document.removeEventListener("mousemove",u,!1)}}),[o]),Object(r.useEffect)((function(){return document.addEventListener("mouseup",l,!1),function(){return document.removeEventListener("mouseup",l,!1)}}),[o]);var u=function(e){if(o&&n){var c=n.current.getBoundingClientRect(),r=e.clientX-c.x,i=e.clientY-c.y,s=Math.atan2(i-t.y,r-t.x)+Math.PI/2;a(ae(t.id,{rotation:s}))}},l=function(e){s(!1),document.body.style.cursor="default"};return Object(he.jsx)("div",{className:"active-object__rotation-handle",onPointerDown:function(e){s(!0),document.body.style.cursor="grabbing"},style:{backgroundColor:o?"red":"#fff"}})},we=function(e){var t=e.x,n=e.y,a=e.cursor,c=e.size,i=e.container,o=e.activeObject,s=Object(r.useState)(!1),u=Object(h.a)(s,2),l=u[0],d=u[1],j=Object(b.b)();Object(r.useEffect)((function(){return document.addEventListener("mousemove",p,!1),function(){return document.removeEventListener("mousemove",p,!1)}}),[l]),Object(r.useEffect)((function(){return document.addEventListener("mouseup",f,!1),function(){return document.removeEventListener("mouseup",f,!1)}}),[l]);var f=function(){d(!1)},p=function(e){if(l&&i){var a=i.current.getBoundingClientRect(),c=e.clientX-a.x,r=e.clientY-a.y,s=(o.x,o.width,o.y,o.height,o.x-o.width/2+o.width*(1-t)),u=o.y-o.height/2+o.height*(1-n),d=function(e){return 1==e?1:-1},h=.5!==n?Math.max(d(n)*r-d(n)*u,30):o.height,b=.5!==t?Math.max(d(t)*c-d(t)*s,30):o.width,f=.5!==t?h/o.height*o.width:o.width,p=.5==n?b:f;o.type==G&&(p=b),console.log(s,u);var v=.5!==n?u+d(n)*h/2:o.y,O=.5!==t?s+d(t)*p/2:o.x;j(ae(o.id,{x:O,y:v,width:p,height:h}))}},v=function(e){return e.preventDefault()},O=-c/2-1;return Object(he.jsx)("div",{className:"active-object__handle",onPointerDown:function(){d(!0)},onDragEnter:v,onDragOver:v,onDragEnd:v,onDragLeave:v,onPointerUp:f,style:{width:c,height:c,cursor:a||"pointer",top:0==n?O:.5==n?"50%":void 0,left:0==t?O:.5==t?"50%":void 0,bottom:1==n?O:void 0,right:1==t?O:void 0,transform:.5===t?"translate(-50%, 0)":.5===n?"translate(0,-50%)":void 0}})},_e=function(e){var t=e.container,n=Object(b.b)(),a=Object(r.useState)(!1),c=Object(h.a)(a,2),i=c[0],o=c[1],s=Object(r.useState)({x:0,y:0}),u=Object(h.a)(s,2),l=u[0],d=u[1],j=Object(b.c)((function(e){return e.canvasObjects.activeObject})),f=Object(b.c)((function(e){return e.canvasObjects.objects})),p=j&&j in f?f[j]:null;Object(r.useEffect)((function(){return document.addEventListener("mousemove",O,!1),function(){return document.removeEventListener("mousemove",O,!1)}}),[i,t,p]);var v=function(e,t,n){return Math.min(Math.max(e,t),n)},O=function(e){if(i&&t){var a=t.current.getBoundingClientRect(),c=e.clientX-a.x-l.x,r=e.clientY-a.y-l.y,o=v(c,0,a.width),s=v(r,0,a.height);n(ae(j,{x:o,y:s}))}},g=function(e){if(t){var n=t.current.getBoundingClientRect(),a=e.clientX-n.x-p.x,c=e.clientY-n.y-p.y;d({x:a,y:c}),o(!0)}},m=function(e){e.preventDefault()};return Object(he.jsxs)("div",{className:"active-object",style:{display:p?"block":"none",top:j?"".concat(p.y-10-p.height/2,"px"):0,left:j?"".concat(p.x-10-p.width/2,"px"):0,width:p?"".concat(p.width+20,"px"):100,height:p?"".concat(p.height+20,"px"):100,transformOrigin:"center center",transform:"rotate(".concat((null===p||void 0===p?void 0:p.rotation)||0,"rad)")},children:[Object(he.jsx)("div",{className:"active-object__content",onDragEnter:m,onDragEnd:m,onPointerDown:g,onDragOver:g,onDragLeave:m,onPointerUp:function(e){o(!1)}}),Object(he.jsx)(we,{x:0,y:0,size:me,cursor:"nw-resize",container:t,activeObject:p}),Object(he.jsx)(we,{x:.5,y:0,size:me,cursor:"n-resize",container:t,activeObject:p}),Object(he.jsx)(we,{x:1,y:0,size:me,cursor:"ne-resize",container:t,activeObject:p}),Object(he.jsx)(we,{x:1,y:.5,size:me,cursor:"e-resize",container:t,activeObject:p}),Object(he.jsx)(we,{x:1,y:1,size:me,cursor:"se-resize",container:t,activeObject:p}),Object(he.jsx)(we,{x:.5,y:1,size:me,cursor:"s-resize",container:t,activeObject:p}),Object(he.jsx)(we,{x:0,y:1,size:me,cursor:"sw-resize",container:t,activeObject:p}),Object(he.jsx)(we,{x:0,y:.5,size:me,cursor:"w-resize",container:t,activeObject:p}),Object(he.jsx)(xe,{activeObject:p,container:t})]})},ye=(n(338),function(){var e=Object(b.b)(),t=Object(r.useRef)(),n=Object(r.useRef)(),i=Object(b.c)((function(e){return e.canvas.dimensions})),o=i.width,s=i.height;Object(b.c)((function(e){return e.canvas.maxDimensions}));return Object(r.useLayoutEffect)((function(){function t(){var t=n.current.getBoundingClientRect();e(function(e,t){return{type:E,payload:{width:e,height:t}}}(Math.round(t.width),Math.round(t.height)))}return window.addEventListener("resize",t),t(),function(){return window.removeEventListener("resize",t)}}),[e]),Object(r.useEffect)((function(){!function(e){if(a)return null;a=new m.a({backgroundColor:16777215,resolution:1,preserveDrawingBuffer:!0}),e.appendChild(a.view),a.stage.sortableChildren=!0,c=new U,a.stage.addChild(c)}(t.current)}),[]),Object(he.jsx)("div",{ref:n,className:"canvas-area",children:Object(he.jsx)("div",{ref:t,className:"canvas-area__canvas",style:{width:o,height:s},children:Object(he.jsx)(_e,{container:t})})})}),ke=(n(339),n(340),n(341),function(e){var t=e.children,n=e.className,a=e.onClick,c=e.disabled;return Object(he.jsx)("button",{className:"rainbow-button ".concat(n),onClick:a,disabled:c,children:t})}),Ne=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.canvas.dimensions})),n=Object(r.useState)(""),a=Object(h.a)(n,2),c=a[0],i=a[1];return Object(he.jsxs)("div",{className:"text-creator",children:[Object(he.jsx)("div",{className:"text-creator__input-container",children:Object(he.jsx)("textarea",{className:"text-creator__input",value:c,onChange:function(e){var t=e.target.value;i(t)},placeholder:"Write Text..."})}),Object(he.jsx)(ke,{className:"rainbow-button--fullsize mt",onClick:function(){e($({text:c,x:Math.round(t.width/2),y:Math.round(t.height/2)}))},disabled:!c,children:"Add Text"})]})},Ce=(n(342),n(251)),Ee=n(271),Se=(n(360),n(361),null),De=null,Ie=function(){var e=Object(r.useRef)(null),t=Object(r.useState)([]),n=Object(h.a)(t,2),a=n[0],c=n[1],i=Object(r.useState)({message:"",time:null,isLoading:!1}),o=Object(h.a)(i,2),s=o[0],u=o[1],b=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j("loading models"),console.log("loading models..."),Se){e.next=6;break}return e.next=5,Ee.a();case 5:Se=e.sent;case 6:if(De){e.next=10;break}return e.next=9,Ce.a({architecture:"MobileNetV1",outputStride:8,quantBytes:4});case 9:De=e.sent;case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];u({message:e,time:t?new Date:null,isLoading:t})},f=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b();case 2:return e.next=4,p(t);case 4:n=e.sent,c(n),a=n.length>0?"Extracted Faces":"No Faces Found",j(a,!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var t=Object(d.a)(l.a.mark((function t(n){var a,c,r,i;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.current){t.next=2;break}return t.abrupt("return",[]);case 2:return console.log("extract Faces"),j("searching for faces"),t.next=6,O(n);case 6:a=t.sent,console.log(a),c=[],r=0;case 10:if(!(r<a.length)){t.next=26;break}return j("extracting face ".concat(r+1)),t.next=14,v(e.current,n,a[r]);case 14:return t.next=16,g(e.current);case 16:return t.next=18,ue(e.current);case 18:(i=t.sent).name="".concat(n.name.split(".")[0],"-f-").concat(r,".png"),i.width=e.current.width,i.height=e.current.height,c.push(i);case 23:r++,t.next=10;break;case 26:return t.abrupt("return",c);case 27:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(l.a.mark((function e(t,n,a){var c,r,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.width=a.width,t.height=a.height,c=a.x,r=a.y,i=a.width,o=a.height,t.getContext("2d").drawImage(n,c,r,i,o,0,0,t.width,t.height);case 8:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,c,r,i,o,s,u;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!1,e.next=3,Se.estimateFaces(t,false);case 3:if(n=e.sent,a=[],n.length>0)for(c=0;c<n.length;c++)r=n[c].topLeft,i=n[c].bottomRight,o=[i[0]-r[0],i[1]-r[1]],s=Math.max(r[1]-o[1]/1.3,0),u=Math.max(r[0]-o[0]/4,0),a.push({x:u,y:s,width:1.5*o[0],height:1.7*o[1]});return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,c,r,i,o,s,u,d,b,j,f,p,v,O;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,De.segmentPerson(t);case 2:for(n=e.sent,a=n.data,c=t.getContext("2d"),r=c.getImageData(0,0,t.width,t.height),i=r.data,o=c.createImageData(t.width,t.height),s=o.data,u=0;u<a.length;u++)d=[i[4*u],i[4*u+1],i[4*u+2],i[4*u+3]],b=d[0],j=d[1],f=d[2],p=d[3],v=a[u]?[b,j,f,p]:[255,255,255,0],O=Object(h.a)(v,4),s[4*u]=O[0],s[4*u+1]=O[1],s[4*u+2]=O[2],s[4*u+3]=O[3];c.putImageData(o,0,0);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{extractFaces:f,extractedFaces:a,canvasRef:e,status:s}},Me=function(e,t){var n=Object(r.useRef)();Object(r.useEffect)((function(){n.current=e}),[e]),Object(r.useEffect)((function(){if(null!==t){var e=setInterval((function(){n&&n.current&&n.current()}),t);return function(){return clearInterval(e)}}}),[t])},Te=function(e){var t=e.className,n=e.startDate,a=e.refreshRate,c=Object(r.useState)(""),i=Object(h.a)(c,2),o=i[0],s=i[1];return Me((function(){console.log("interval");var e=n?function(e){var t=Math.floor(((new Date).getTime()-e.getTime())/1e3),n=Math.floor(t/60)%60,a=t%60;return"".concat(("0"+n).slice(-2),":").concat(("0"+a).slice(-2))}(n):"";s(e)}),a),Object(he.jsx)("div",{className:t,children:o})};Te.defaultProps={refreshRate:500};var Le=Te,ze=(n(357),function(e){var t=e.image,n=e.onChange,a=e.onDrop,c=t?t.src:void 0,i=Object(r.useState)(!1),o=Object(h.a)(i,2),s=o[0],u=o[1],l=function(){u(!1)};return Object(he.jsxs)("label",{className:"image-input",onDrop:a,onDragOver:function(e){e.preventDefault(),u(!0)},onPointerOut:l,onDragLeave:l,children:[Object(he.jsx)("input",{type:"file",accept:"image/*",name:"image",className:"image-input__input",onChange:n}),Object(he.jsxs)("div",{className:"image-input__background ".concat(t?"image-input__background--elevated":""," ").concat(s?"image-input__background--force-show":""),children:[Object(he.jsx)("div",{children:"Chose or drop file"}),Object(he.jsx)(le.b,{})]}),Object(he.jsx)("img",{className:"image-input__img",src:c})]})}),Ae=function(){var e=Object(b.b)(),t=Object(b.c)((function(e){return e.canvas.dimensions})),n=Object(r.useState)(void 0),a=Object(h.a)(n,2),c=a[0],i=a[1],o=Ie(),s=o.canvasRef,u=o.status,j=o.extractedFaces,f=o.extractFaces,p=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("load image"),(n=t.target)&&n.files&&O(n.files[0]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),t.stopPropagation(),n=t.dataTransfer.files[0],O(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(t);case 2:n=e.sent,console.log(n),i(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var n=Object(d.a)(l.a.mark((function n(){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:c&&e(te({src:c.src,x:Math.round(t.width/2),y:Math.round(t.height/2)}));case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),m=function(){var e=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c&&f(c);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var n=Object(d.a)(l.a.mark((function n(a,c){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e(te({src:c,x:Math.round(t.width/2),y:Math.round(t.height/2)}));case 1:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}();return Object(he.jsxs)("div",{className:"image-creator",children:[Object(he.jsx)(ze,{image:c,onChange:p,onDrop:v}),Object(he.jsx)(ke,{className:"rainbow-button--fullsize mt",onClick:g,disabled:!c,children:"Add Image"}),Object(he.jsx)(ke,{className:"rainbow-button--fullsize mt",onClick:m,disabled:!c,children:"Extract Faces"}),Object(he.jsxs)("div",{className:"image-creator__face-extractor",children:[Object(he.jsxs)("div",{className:"image-creator__status",children:[Object(he.jsx)(Le,{className:"image-creator__time",startDate:u.time}),Object(he.jsx)("div",{children:u.message})]}),Object(he.jsx)("div",{className:"image-creator__face-list",children:j.map((function(e){var t=window.URL.createObjectURL(e);return Object(he.jsx)("div",{className:"image-creator__face-item",onClick:function(){return x(e,t)},children:Object(he.jsx)("img",{src:t})})}))})]}),Object(he.jsx)("canvas",{ref:s,className:"image-creator__canvas"})]})},Be={TEXT:"Text",IMAGE:"Image"},Re=function(){var e=Object(r.useState)(Be.TEXT),t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(he.jsxs)("div",{className:"object-creator",children:[Object(he.jsx)("header",{className:"object-creator__header",children:Object.entries(Be).map((function(e){var t=Object(h.a)(e,2),c=(t[0],t[1]);return Object(he.jsx)("button",{className:"object-creator__toggle-btn ".concat(n==c?"object-creator__toggle-btn--active":""),onClick:function(){return a(c)},children:c},c)}))}),Object(he.jsx)("div",{className:"object-creator__container",children:function(e){switch(e){case Be.IMAGE:return Object(he.jsx)(Ae,{});default:return Object(he.jsx)(Ne,{})}}(n)})]})},Pe=function(){return Object(he.jsx)("div",{className:"ui-panel p flex-center",children:Object(he.jsx)(ke,{className:"rainbow-button--fullsize",onClick:function(){if(a){console.log(a.view);var e=document.createElement("a");e.download="meme.png",e.href=a.view.toDataURL("image/png"),e.click()}},children:"Download"})})},Fe=function(e){var t=e.activeObject,n=Object(b.b)(),a=function(e){var a=e.target,c=a.name,r=a.value,i=parseInt(r)?parseInt(r):0;n(ae(t.id,Object(y.a)({},c,i)))},c=function(e){var a=e.target,c=a.name,r=a.value;n(ae(t.id,Object(y.a)({},c,r)))};return Object(he.jsxs)("div",{className:"editor",children:[Object(he.jsxs)("div",{className:"editor__row",children:[Object(he.jsx)(be,{label:"x:",suffix:"px",value:Math.round(t.x),name:"x",onChange:a}),Object(he.jsx)(be,{label:"y:",suffix:"px",value:Math.round(t.y),name:"y",onChange:a})]}),Object(he.jsxs)("div",{className:"editor__row",children:[Object(he.jsx)(be,{label:"width:",suffix:"px",value:Math.round(t.width),name:"width",onChange:a}),Object(he.jsx)(be,{label:"height:",suffix:"px",value:Math.round(t.height),name:"height",onChange:a})]}),Object(he.jsx)("div",{className:"editor__row",children:Object(he.jsx)(be,{label:"rotation:",suffix:"px",value:t.rotation,name:"rotation",onChange:a,type:"number"})}),Object(he.jsx)("div",{className:"editor__row",children:Object(he.jsx)(be,{label:"font size:",suffix:"px",value:t.fontSize,name:"fontSize",onChange:a,type:"number"})}),Object(he.jsx)("div",{className:"editor__row",children:Object(he.jsx)(be,{label:"color:",suffix:"",type:"color",value:t.color,name:"color",onChange:c})}),Object(he.jsx)("div",{className:"editor__row",children:Object(he.jsx)(be,{label:"border color:",suffix:"",type:"color",value:t.borderColor,name:"borderColor",onChange:c})}),Object(he.jsx)("div",{className:"editor__row",children:Object(he.jsx)(be,{label:"border width:",suffix:"px",value:t.borderWidth,name:"borderWidth",onChange:a})})]})},We=function(e){var t=e.activeObject,n=Object(b.b)(),a=function(e){var a=e.target,c=a.name,r=a.value,i=parseInt(r)?parseInt(r):0;n(ae(t.id,Object(y.a)({},c,i)))};return Object(he.jsxs)("div",{className:"editor",children:[Object(he.jsxs)("div",{className:"editor__row",children:[Object(he.jsx)(be,{label:"x:",suffix:"px",value:Math.round(t.x),name:"x",onChange:a}),Object(he.jsx)(be,{label:"y:",suffix:"px",value:Math.round(t.y),name:"y",onChange:a})]}),Object(he.jsxs)("div",{className:"editor__row",children:[Object(he.jsx)(be,{label:"width:",suffix:"px",value:Math.round(t.width),name:"width",onChange:a}),Object(he.jsx)(be,{label:"height:",suffix:"px",value:Math.round(t.height),name:"height",onChange:a})]}),Object(he.jsx)("div",{className:"editor__row",children:Object(he.jsx)(be,{label:"rotation:",suffix:"px",value:t.rotation,name:"rotation",onChange:a,type:"number"})}),Object(he.jsx)("div",{className:"editor__row",children:Object(he.jsx)(be,{label:"flip:",suffix:"",value:t.flipHorizontal,name:"flipHorizontal",onChange:function(e){console.log("flip");var a=e.target,c=a.name,r=(a.value,a.checked);n(ae(t.id,Object(y.a)({},c,r)))},type:"checkbox"})})]})},He=function(){var e=Object(b.c)((function(e){return e.canvasObjects.activeObject})),t=Object(b.c)((function(e){return e.canvasObjects.objects})),n=e&&e in t?t[e]:null;return Object(he.jsx)("div",{className:"ui-panel",children:function(){if(!e)return null;switch(n.type){case J:return Object(he.jsx)(We,{activeObject:n});case G:return Object(he.jsx)(Fe,{activeObject:n});default:return null}}()})},Ue=(n(358),function(e){var t=e.item,n=e.isActive,a=Object(b.b)();return Object(he.jsxs)("div",{className:"canvas-item ".concat(n?"canvas-item--active":""),onClick:function(e){a(ne(t.id))},children:[Object(he.jsx)("div",{className:"canvas-item__icon",children:function(){switch(t.type){case G:return Object(he.jsx)(le.a,{});case J:return Object(he.jsx)(le.b,{});default:return null}}()}),Object(he.jsx)("div",{className:"canvas-item__content",children:function(){switch(t.type){case G:return t.text;case J:default:return null}}()}),Object(he.jsx)("div",{className:"canvas-item__remove-btn",onClick:function(e){var n;e.stopPropagation(),a((n=t.id,{type:j,payload:n}))},children:Object(he.jsx)(le.d,{})})]})}),Ve=function(){Object(b.b)();var e=Object(b.c)((function(e){return e.canvasObjects.activeObject})),t=Object(b.c)((function(e){return e.canvasObjects.objects})),n=Object(b.c)((function(e){return e.canvasObjects.objectsList}));return Object(he.jsx)("div",{className:"ui-panel p canvas-object-list",children:n.map((function(n){var a=t[n];return Object(he.jsx)(Ue,{item:a,isActive:e===a.id},a.id)}))})},Je=function(){var e=Object(b.b)();return Object(he.jsx)("div",{className:"ui-panel p flex-center",children:Object(he.jsx)(ke,{className:"rainbow-button--fullsize",onClick:function(){e(ie(!0))},children:"Edit Background"})})};var Ge=function(){Object(b.b)();var e=Object(r.useState)(null),t=Object(h.a)(e,2);return t[0],t[1],Object(he.jsxs)("div",{className:"App layout",children:[Object(he.jsx)(ge,{}),Object(he.jsx)("div",{className:"layout__info",children:Object(he.jsx)(Je,{})}),Object(he.jsx)("div",{className:"layout__canvas",children:Object(he.jsx)(ye,{})}),Object(he.jsx)("div",{className:"layout__download",children:Object(he.jsx)(Pe,{})}),Object(he.jsx)("div",{className:"layout__elements",children:Object(he.jsx)(Ve,{})}),Object(he.jsx)("div",{className:"layout__creator",children:Object(he.jsx)(Re,{})}),Object(he.jsx)("div",{className:"layout__editor",children:Object(he.jsx)(He,{})})]})},Xe=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,365)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};n(359);s.a.render(Object(he.jsx)(i.a.StrictMode,{children:Object(he.jsx)(b.a,{store:A,children:Object(he.jsx)(Ge,{})})}),document.getElementById("root")),Xe()}},[[362,1,2]]]);
//# sourceMappingURL=main.e49b53b1.chunk.js.map